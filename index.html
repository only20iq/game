<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" href="icon.jpg">
        <meta charset="utf-8">
        <title>Lobby</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
        <base target="_blank">
        <meta name="subject" content="">
        <meta name="description" content="JS Based Chatbot">
        <Meta name="Classification" content="">
        <Meta name="rating" content="">
        <meta name="category" content="">
        <meta name="keywords" content="js,chatbot,basic,chat,bot,ai">
        <meta name="author" content="">
        <meta name="robots" content="index, follow">
        <meta http-equiv="content-type" content="text/html;UTF-8">
        <meta http-equiv="content-language" content="en">
        <meta http-equiv="revisit-after" content="">
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />
        <link rel="shortcut icon" href="ico.ico">
        <noscript>Sorry, your browser does not support JavaScript!</noscript>
        <script src="start.js"></script>
        <style>
          *{padding:0;margin:0;}
          #controls {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 5px;
  position: fixed;
  bottom: 10px;
  right: 10px;
  padding: 5px;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 10px;
  width: fit-content;
  z-index: 5;
  -webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}

#btnUp, #btnLeft, #btnAuto, #btnRight, #btnDown, #btnUpLeft, #btnDownLeft, #btnUpRight, #btnDownRight {
  padding: 10px;
  border: none;
  border-radius: 5px;
  background-color: transparent;
  color: #333;
  font-size: 16px;
  font-weight: bold;
  touch-action: manipulation; /* Mobil cihazlarda çift tıklama zoom engellemek için */
}

#btnUp:active, #btnLeft:active, #btnAuto:active, #btnRight:active, #btnDown:active, #btnUpLeft:active, #btnDownLeft:active, #btnUpRight:active, #btnDownRight:active {
  background-color: #ddd;
}





@keyframes yavasHareket {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: -100vw 0; /* Resmin genişliği kadar sola kaydır */
  }
}


#benzersizID {
  position: fixed; /* Sabit pozisyon */
  top: 0;
  left: 0;
  width: 100%; /* Viewport genişliği */
  height: 100%; /* Viewport yüksekliği */
  background-image: url('output-onlinepngtools.png'); /* Şeffaf resminizin yolu */
  background-repeat: repeat-x; /* Yatay eksende tekrar etmesi için */
  background-size: contain; /* Resmin orijinal boyutu */
  z-index: 1;
  animation: yavasHareket 240s linear infinite; /* Animasyon süresini ayarlayın */
  opacity:0.51;
  backdrop-filter:blur(10px);
  background-blend-mode: lighten;
}







@keyframes blink1 {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}
.trail1 {
    position: absolute;
    background-color: white;
    height:10px;
    width:10px;
}
body {
  margin: 0;
  overflow: hidden;
  background: black; /* Arka planı siyah yap */
  position: relative;
  width: 4500px; /* Genişliği ekranın tamamını kaplayacak şekilde ayarla */
  height: 4500px; /* Yüksekliği ekranın tamamını kaplayacak şekilde ayarla */
  z-index: -1;
}

#main {
  background: url('qaevyh08hsx51.webp') no-repeat center center scroll;
  background-clip: padding-box;
  background-size: cover; /* Resmi kaplayacak şekilde ayarla */
  position: absolute; /* Pozisyonu sabitle */
  top:50%;
  left:50%;
  transform: translate(-50%, -50%); /* #main'i tam ortaya al */
  width: 4000px; /* Genişlik */
  height: 4000px; /* Yükseklik */
  z-index: 0; /* Z-index'i body'nin üzerine çıkar */
}

#character {
  -ms-user-select: none;
  -webkit-user-select: none;
  user-select: none;
  position: absolute;
  width: 68px;
  height: 277px;
  background: url(abc.png);
  background-repeat: no-repeat;
  background-size: contain;
  transform: translate(-50%, -50%);
  /* border:1px solid red; */
  transform-origin: center center; /* Dönüşlerin merkez noktasını ayarla */
  z-index:3;
}
#ball {
    position: absolute;
    top:40%;left:30%;
    background: url(turret.png);
  background-repeat: no-repeat;
  background-size: contain;
  height: 74px;
  width: 33.25px;
  z-index:2;
  transform-origin: center center;

}
#laser1 {
    position: absolute;
    top:70%;left:30%;
    background: url(turret.png);
  background-repeat: no-repeat;
  background-size: contain;
  height: 74px;
  width: 33.25px;
  z-index:2;
  transform-origin: center center;

}
#laser2 {
    position: absolute;
    top:10%;left:30%;
    background: url(turret.png);
  background-repeat: no-repeat;
  background-size: contain;
  height: 74px;
  width: 33.25px;
  z-index:2;
  transform-origin: center center;

}

        .square {
            -ms-user-select: none;
    -webkit-user-select: none;
    user-select: none;
            -ms-user-select: none;
            -webkit-user-select: none;
            user-select: none;
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: red;
        }
        .missile {
            -ms-user-select: none;
    -webkit-user-select: none;
    user-select: none;
            position: absolute;
            width: 10px;
            height: 10px;
            background: black;
            border-radius: 50%;
        }
        .laser {
            -ms-user-select: none;
    -webkit-user-select: none;
    user-select: none;
            position: absolute;
            width: 10px;
            height: 10px;
            background: #FCEAFF;
            border-radius: 50%;
            z-index:3;
            animation: flameTrail 0.60s infinite;
        }
        /* .explosion {
            display: none;
            position: absolute;
            width: 30px;
            height: 30px;
            background: orange;
            border-radius: 50%;
        } */


.missile.trail {
    /* Alev efekti için anahtar kareler animasyonu */
    animation: flameTrail 0.60s infinite;
}

@keyframes flameTrail {
    0% {
        box-shadow: 0 0 10px 2px aqua;
    }
    50% {
        box-shadow: 0 0 20px 4px azure;
    }
    100% {
        box-shadow: 0 0 10px 2px antiquewhite;
    }
}

/* @keyframes shockwave {
  0% {
    box-shadow: 0 0 0 0px rgba(255, 255, 255, 0.5),
                0 0 0 15px rgba(255, 255, 255, 0.3),
                0 0 0 30px rgba(255, 255, 255, 0.2),
                0 0 0 45px rgba(255, 255, 255, 0.1),
                0 0 0 60px rgba(255, 255, 255, 0);
  }
  100% {
    box-shadow: 0 0 0 60px rgba(255, 255, 255, 0),
                0 0 0 120px rgba(255, 255, 255, 0),
                0 0 0 180px rgba(255, 255, 255, 0),
                0 0 0 240px rgba(255, 255, 255, 0),
                0 0 0 300px rgba(255, 255, 255, 0);
    opacity: 0;
  }
} */


@keyframes shockwave {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

.explosion {
  position: absolute;
  border-radius: 500%;
  background-color: white;
  background-color: transparent;
  transform: translate(-50%, -50%);
  animation: shockwave1 0.60s forwards;
  z-index:-1;
}
@keyframes shockwave1 {
  0% {
    width: 0;
    height: 0;
    box-shadow: 0 0 0 0px rgba(255, 255, 255, 0.5),
                0 0 0 15px rgba(255, 255, 255, 0.3),
                0 0 0 30px rgba(255, 255, 255, 0.2),
                0 0 0 45px rgba(255, 255, 255, 0.1),
                0 0 0 60px rgba(255, 255, 255, 0);
  }
  100% {
    width: 200px;
    height: 200px;
    box-shadow: 0 0 0 60px rgba(255, 255, 255, 0),
                0 0 0 120px rgba(255, 255, 255, 0),
                0 0 0 180px rgba(255, 255, 255, 0),
                0 0 0 240px rgba(255, 255, 255, 0),
                0 0 0 300px rgba(255, 255, 255, 0);
    opacity: 0;
  }
}
.explosion1 {
  position: absolute;
  border-radius: 50%;
  background-color: whitesmoke;
  transform: translate(-50%, -50%);
  animation: flash 0.5s forwards;
  z-index: 2;
}

@keyframes flash {
  0% {
    width: 0;
    height: 0;
  }
  70% {
    width: 20px;
    height: 20px;
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

/* Partikül temel stilini koru */
.particle {
  position: absolute;
  background-color: azure;
  transform-origin: top;
  z-index: 1;
  opacity: 1;
}

/* Animasyonlar için genel stil */
.move {
  animation: moveParticle 0.1s linear forwards;
}

/* Yukarı hareket animasyonu */
@keyframes moveUp {
  to {
    transform: translateY(-10px);
  }
}

/* Aşağı hareket animasyonu */
@keyframes moveDown {
  to {
    transform: translateY(10px);
  }
}

/* Sola hareket animasyonu */
@keyframes moveLeft {
  to {
    transform: translateX(-10px);
  }
}

/* Sağa hareket animasyonu */
@keyframes moveRight {
  to {
    transform: translateX(10px);
  }
}

/* Yön sınıflarını animasyonlarla ilişkilendir */
.up {
  animation-name: moveUp;
  width: 2px;
  height: 10px;
  margin-top:-8px!important;
}

.down {
  animation-name: moveDown;
  width: 2px;
  height: 10px;
}

.left {
  animation-name: moveLeft;
  width: 10px;
  height: 2px;
  margin-left:-8px!important;
}

.right {
  animation-name: moveRight;
  width: 10px;
  height: 2px;
}



.long-bar, .short-bar {
  position: absolute;
  background: linear-gradient(to right, white 0%, rgb(0, 94, 128) 100%);
  border-radius: 50%;
  z-index:3;
}
@keyframes shockwavelong {
  0% {
    height: 0px;
  }
  100% {
    height: 360px;
  }
}
@keyframes shockwaveshort {
  0% {
    height: 0px;
  }
  100% {
    height: 120px;
  }
}
.long-bar {
  width: 3px;
  height: 360px;
  animation: shockwavelong 0.60s forwards;
}

.short-bar {
  width: 4px;
  height: 120px;
  animation: shockwaveshort 0.60s forwards;
}






.long-bar1, .short-bar1 {
  position: absolute;
  background: linear-gradient(to right, white 0%, rgb(0, 94, 128) 100%);
  border-radius: 50%;
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.7); /* Parlaklık efekti */
}
@keyframes shockwavelong1 {
  0% {
    height: 0px;
  }
  100% {
    height: 180px;
  }
}
@keyframes shockwaveshort1 {
  0% {
    height: 0px;
  }
  100% {
    height: 60px;
  }
}
.long-bar1 {
  width: 0.75px; /* Orijinal genişliğin %25'i */
  height: 22.5px; /* Orijinal yüksekliğin %25'i */
  animation: shockwavelong1 0.60s infinite alternate; /* Sürekli animasyon */
}

.short-bar1 {
  width: 1px; /* Orijinal genişliğin %25'i */
  height: 7.5px; /* Orijinal yüksekliğin %25'i */
  animation: shockwaveshort1 0.60s infinite alternate; /* Sürekli animasyon */
}
/* @keyframes expandExplosion {
  0% {
    width: 0;
    height: 0;
    opacity: 1;
  }
  100% {
    width: 200px;
    height: 200px;
    opacity: 0;
    background-color: red;
  }
} */


        </style>
    </head>
    <body>
      <div id="main">
<div id="benzersizID"></div>
        <div id="character"><div id="ball"></div><div id="laser1"></div><div id="laser2"></div></div>
        <!-- <div id="explosion" class="explosion"></div> -->
        <div id="square1" class="square" style="top: 100px; left: 100px;"></div>
        <div id="square2" class="square" style="top: 200px; left: 300px;"></div>
        <div id="square3" class="square" style="top: 400px; left: 500px;"></div>
        <div id="square4" class="square" style="top: 300px; left: 700px;"></div>
</div>
<!-- Yürüme tuşları -->
<!-- <div id="controls">
  <button onmousedown="startMove('up')" onmouseup="stopMove()" onclick="move('up')">Yukarı</button>
  <button onmousedown="startMove('left')" onmouseup="stopMove()" onclick="move('left')">Sol</button>
  <button onclick="move('auto')">Otomatik</button>
  <button onmousedown="startMove('right')" onmouseup="stopMove()" onclick="move('right')">Sağ</button>
  <button onmousedown="startMove('down')" onmouseup="stopMove()" onclick="move('down')">Aşağı</button>
</div> -->

<div id="controls" style="z-index:5; -ms-user-select: none; -webkit-user-select: none; user-select: none;">
  <button id="btnUpLeft" onclick="move('up-left')" onmousedown="startMove('up-left')" onmouseup="stopMove()"><img style="pointer-events:none;" height="32" src="sol-üst.png"></button>
  <button id="btnUp" onclick="move('up')" onmousedown="startMove('up')" onmouseup="stopMove()"><img style="pointer-events:none;" height="32" src="Üst.png"></button>
  <button id="btnUpRight" onclick="move('up-right')" onmousedown="startMove('up-right')" onmouseup="stopMove()"><img style="pointer-events:none;" height="32" src="sağ-üst.png"></button>
  <!---->
  <button id="btnLeft" onclick="move('left')" onmousedown="startMove('left')" onmouseup="stopMove()"><img style="pointer-events:none;" height="32" src="Sol.png"></button>
  <button id="btnAuto" onclick="move('auto')">WARP</button>
  <button id="btnRight" onclick="move('right')" onmousedown="startMove('right')" onmouseup="stopMove()"><img style="pointer-events:none;" height="32" src="Sağ.png"></button>
  <!---->
  <button id="btnDownLeft" onclick="move('down-left')" onmousedown="startMove('down-left')" onmouseup="stopMove()"><img style="pointer-events:none;" height="32" src="sol-alt.png"></button>
  <button id="btnDown" onclick="move('down')" onmousedown="startMove('down')" onmouseup="stopMove()"><img style="pointer-events:none;" height="32" src="Alt.png"></button>
  <button id="btnDownRight" onclick="move('down-right')" onmousedown="startMove('down-right')" onmouseup="stopMove()"><img style="pointer-events:none;" height="32" src="sağ-alt.png"></button>
</div>



</body>
    <script>

let moveInterval;
let isMoving = false;

function startMove(direction) {
    if (!isMoving) {
        isMoving = true;
        moveInterval = setInterval(function() { move(direction); }, 30); // Hareketi başlat ve her 100ms'de tekrarla
    }
}

function stopMove() {
    clearInterval(moveInterval); // Interval'i temizle ve hareketi durdur
    isMoving = false;
}





let main = document.getElementById("main");
let character = document.getElementById("character");
// document.body.style.width = "4000px"; // Haritanın genişliğini ayarla
// document.body.style.height = "4000px"; // Haritanın yüksekliğini ayarla
// document.body.style.position = "relative"; // Pozisyon referansını ayarla

function updateCamera() {
    // Karakterin mevcut konumunu al
    const characterRect = character.getBoundingClientRect();
    
    // Sayfanın ortasına göre karakterin konumunu ayarla
    window.scrollTo({
        top: characterRect.top + window.scrollY - window.innerHeight / 2,
        left: characterRect.left + window.scrollX - window.innerWidth / 2,
        behavior: 'auto' // Kaydırma işlemini yumuşak yap
    });
}
let ball = document.getElementById("ball"); // Topun ID'si 'ball' olsun
let laser1 = document.getElementById("laser1"); // Topun ID'si 'ball' olsun
let laser2 = document.getElementById("laser2"); // Topun ID'si 'ball' olsun
let characterX = 1000;
let characterY = 1000;
var lookDirection = 'up'; // Başlangıç bakış yönü
// let characterWidth = 68; // Karakterin genişliği
// let characterHeight = 277; // Karakterin yüksekliği


    // Karelerin durumlarını tutacak bir nesne
    const squareStates = {
        square1: false,
        square2: false,
        square3: false,
        square4: false
    };

    let keysPressed = {};

window.addEventListener("keydown", (event) => {
    keysPressed[event.key] = true;

    // Çapraz hareketleri algılama
    if ((keysPressed['ArrowUp'] || keysPressed['w']) && (keysPressed['ArrowLeft'] || keysPressed['a'])) {
        move('up-left');
    } else if ((keysPressed['ArrowUp'] || keysPressed['w']) && (keysPressed['ArrowRight'] || keysPressed['d'])) {
        move('up-right');
    } else if ((keysPressed['ArrowDown'] || keysPressed['s']) && (keysPressed['ArrowLeft'] || keysPressed['a'])) {
        move('down-left');
    } else if ((keysPressed['ArrowDown'] || keysPressed['s']) && (keysPressed['ArrowRight'] || keysPressed['d'])) {
        move('down-right');
    } else {
        // Tek yönlü hareketleri algılama
        if (keysPressed['ArrowUp'] || keysPressed['w']) move('up');
        if (keysPressed['ArrowDown'] || keysPressed['s']) move('down');
        if (keysPressed['ArrowLeft'] || keysPressed['a']) move('left');
        if (keysPressed['ArrowRight'] || keysPressed['d']) move('right');
    }

    // character.style.transform = `translate(${characterX}px, ${characterY}px)`;
    // checkCollision();
});

window.addEventListener("keyup", (event) => {
    delete keysPressed[event.key];
});


    // Karakterin hızını tutacak değişken
let speed = 5.5;

// Karakterin hızını güncelleyecek fonksiyon
function updateSpeed() {
    // Zıt yön tuşlarına basıldığında karakterin hızını sıfırla
    if ((keysPressed['ArrowLeft'] && keysPressed['ArrowRight']) || (keysPressed['ArrowUp'] && keysPressed['ArrowDown'])) {
        speed = 0;
    } else {
        speed = 5.5;
    }
}

    function move(direction) {
        if (direction === 'auto') {
            // Otomatik yürüme için bir interval başlat
            const autoMove = setInterval(() => {
                move(lookDirection);
            }, 30);
            // Otomatik yürümeyi durdurmak için bir yol sağla
            setTimeout(() => { clearInterval(autoMove); }, 7000); // 5 saniye sonra durdur
        }else {
            lookDirection = direction; // Bakış yönünü güncelle
            moveCharacter(direction);
            rotateCharacter(direction);
        }

    }
    function rotateCharacter(direction) {
    let rotationAngle = 0; // Dönüş açısı
    switch (direction) {
        case 'up':
            rotationAngle = 0;
            break;
        case 'down':
            rotationAngle = 180;
            break;
        case 'left':
            rotationAngle = -90;
            break;
        case 'right':
            rotationAngle = 90;
            break;
        // Çapraz hareketler için ek açılar
        case 'up-left':
            rotationAngle = -45;
            break;
        case 'down-left':
            rotationAngle = -135;
            break;
        case 'up-right':
            rotationAngle = 45;
            break;
        case 'down-right':
            rotationAngle = 135;
            break;
    }

    // if ((direction === 'left' || direction === 'right') && lookDirection != 'left' && lookDirection != 'right') {
    //   // Sağa veya sola dönüşte boyutları değiştir
    //   [characterWidth, characterHeight] = [characterHeight, characterWidth];
    // }
    // // Karakterin dönüş açısına göre boyutlarını güncelle
    // if ((direction === 'up' || direction === 'down') && lookDirection != 'up' && lookDirection != 'down') {
    // // Sağa veya sola dönüşte boyutları değiştir
    // [characterWidth, characterHeight] = [characterHeight, characterWidth];
    // }
    // lookDirection = direction; // Bakış yönünü güncelle
    
    character.style.transform = `translate(${characterX}px, ${characterY}px) rotate(${rotationAngle}deg)`;
    // ball.style.transform = `rotate(${rotationAngle}deg)`; // Topun da dönmesi için
}

function rotateElement(elementId, eventX, eventY) {
  const element = document.getElementById(elementId); // Elementi ID'ye göre seç
  const elementPosition = element.getBoundingClientRect(); // Elementin pozisyonunu al

  // Farenin element'e göre pozisyonunu hesapla
  const mouseX = eventX;
  const mouseY = eventY;
  const centerX = elementPosition.left + elementPosition.width / 2;
  const centerY = elementPosition.top + elementPosition.height / 2;

  // Açıyı hesapla
  const deltaX = mouseX - centerX;
  const deltaY = mouseY - centerY;
  var eklenecek = 0;
  if (lookDirection == "up") { eklenecek = 82; }
  if (lookDirection == "down") { eklenecek = -82; }
  if (lookDirection == "left") { eklenecek = -175; }
  if (lookDirection == "right") { eklenecek = 0; }
  if (lookDirection == "up-left") { eklenecek = 125; }
  if (lookDirection == "down-left") { eklenecek = -140; }
  if (lookDirection == "up-right") { eklenecek = 55; }
  if (lookDirection == "down-right") { eklenecek = -50; }
  const rotationAngle = (Math.atan2(deltaY, deltaX) * (180 / Math.PI)) + eklenecek;

  // Elementi döndür
  element.style.transform = `rotate(${rotationAngle}deg)`;
}
function rotateBall(eventX,eventY) {
  // 'ball', 'laser1', 'laser2' için döngü
  ['ball', 'laser1', 'laser2'].forEach((id) => {
    rotateElement(id, event.clientX, event.clientY);
  });
}


    // Karakteri hareket ettirme fonksiyonu
    function moveCharacter(direction) {
        updateSpeed(); // Hızı güncelle
        const moveAmount = speed; // Hızı kullanarak hareket miktarını ayarla
        let newX = characterX;
  let newY = characterY;

  switch (direction) {
    case 'up':
      newY -= moveAmount;
      break;
    case 'down':
      newY += moveAmount;
      break;
    case 'left':
      newX -= moveAmount;
      break;
    case 'right':
      newX += moveAmount;
      break;
    // Çapraz hareketler
    case 'up-left':
      newY -= moveAmount;
      newX -= moveAmount;
      break;
    case 'down-left':
      newY += moveAmount;
      newX -= moveAmount;
      break;
    case 'up-right':
      newY -= moveAmount;
      newX += moveAmount;
      break;
    case 'down-right':
      newY += moveAmount;
      newX += moveAmount;
      break;
  }
  // Harita sınırlarını kontrol et
  const mainRect = main.getBoundingClientRect();
  if (newX >= 0 && newX <= mainRect.width-character.offsetWidth) {
    characterX = newX;
  }
  if (newY >= 0 && newY <= mainRect.height-character.offsetHeight) {
    characterY = newY;
  }

        updateCamera();
        // character.style.transform = `translate(${characterX}px, ${characterY}px)`;
        checkCollision();
    }

    // Kareler için çarpışma algılama ve durum kontrolü
    function checkCollision() {
        const squares = document.querySelectorAll(".square");
        const characterRect = character.getBoundingClientRect();
        squares.forEach((square) => {
            const squareRect = square.getBoundingClientRect();
            const isColliding = characterRect.left < squareRect.right && characterRect.right > squareRect.left &&
                                characterRect.top < squareRect.bottom && characterRect.bottom > squareRect.top;
            const squareId = square.id;
            if (isColliding && !squareStates[squareId]) {
                console.log("Kareye girdiniz!");
                squareStates[squareId] = true; // Kareye girişi kaydet
            } else if (!isColliding && squareStates[squareId]) {
                squareStates[squareId] = false; // Kareye çıkışı kaydet
            }
        });
    }




    const explosion = document.getElementById('explosion');

// Füze gönderme fonksiyonu
function launchLaser(eventX,eventY,targetx) {
    const laser = document.createElement('div');
    laser.classList.add('laser');
    document.body.appendChild(laser);

    // Füzenin başlangıç konumunu ayarla
    const laser1Rect = targetx.getBoundingClientRect();
    const startX = (laser1Rect.left + laser1Rect.width / 2) + window.scrollX;
    const startY = (laser1Rect.top + laser1Rect.height / 2) + window.scrollY;
    laser.style.left = startX + 'px';
    laser.style.top = startY + 'px';

    // Füzenin hedefe doğru hareketini ayarla
    const targetX = eventX + window.scrollX;
    const targetY = eventY + window.scrollY;
    laser.style.transform = `rotate(${Math.atan2(targetY - startY, targetX - startX)}rad)`;

    // Hedefin uzaklığına göre füzenin hızını hesapla
    const distance = Math.sqrt(Math.pow(targetX - startX, 2) + Math.pow(targetY - startY, 2));
    const speed = distance / 2500; // Hedefe ulaşması için gereken süre (milisaniye cinsinden)
    laser.style.transition = `all ${speed}s linear`;

    // Füzenin hedefe doğru hareketini başlat
    laser.style.left = targetX - laser.offsetWidth / 2 + 'px'; // Füzenin merkezini hedefin merkezine getir
    laser.style.top = targetY - laser.offsetHeight / 2 + 'px'; // Füzenin merkezini hedefin merkezine getir

    // Şok dalgası oluşturma fonksiyonu
    function createLaserShockwave() {
        for (let i = 0; i < 2; i++) {
            createShockwave('long');
        }
        for (let i = 0; i < 1; i++) {
            createShockwave('short');
        }
    }

    // Şok dalgası oluştur
    function createShockwave(type) {
        const angle = Math.round(Math.random() * 360);
        // const shockwave = document.createElement('div');
        // shockwave.classList.add(type === 'long' ? 'long-bar' : 'short-bar');
        // document.body.appendChild(shockwave);

        // // Şok dalgasının başlangıç konumunu lazerle aynı yap
        // const laserRect = laser.getBoundingClientRect();
        // shockwave.style.left = `${laserRect.left + window.scrollX}px`;
        // shockwave.style.top = `${laserRect.top + window.scrollY}px`;

        // // Rastgele açıyla dönüşüm uygula
        // shockwave.style.transform = `translate(-50%, -50%) rotate(${angle}deg)`;

        // // Lazer hareket ettiğinde şok dalgasının konumunu güncelle
        // requestAnimationFrame(() => {
        //     const laserRect = laser.getBoundingClientRect();
        //     shockwave.style.left = `${laserRect.left + window.scrollX - shockwave.offsetWidth / 2}px`;
        //     shockwave.style.top = `${laserRect.top + window.scrollY - shockwave.offsetHeight / 2}px`;
        // });

        // // Animasyon bitiminde elementi kaldır
        // shockwave.addEventListener('animationend', () => {
        //     shockwave.remove();
        // });
        // Şok dalgasının başlangıç konumunu lazerin başlangıç konumuna ayarla
        const shockwave = document.createElement('div');
        shockwave.classList.add(type === 'long' ? 'long-bar1' : 'short-bar1');
        document.body.appendChild(shockwave);

        const laserRect = laser.getBoundingClientRect();
        shockwave.style.left = `${laserRect.left + window.scrollX - shockwave.offsetWidth / 2}px`;
        shockwave.style.top = `${laserRect.top + window.scrollY - shockwave.offsetHeight / 2}px`;

        // Rastgele açıyla dönüşüm uygula
        shockwave.style.transform = `translate(-50%, -50%) rotate(${angle}deg)`;
        
        // Şok dalgasının hedefe doğru bağımsız hareketini ayarla
        const shockwaveTargetX = targetX - shockwave.offsetWidth / 2;
        const shockwaveTargetY = targetY - shockwave.offsetHeight / 2;
        const shockwaveSpeed = speed; // Lazerle aynı hızda olacak

        shockwave.style.transition = `all ${shockwaveSpeed}s linear`;
        shockwave.style.left = `${shockwaveTargetX}px`;
        shockwave.style.top = `${shockwaveTargetY}px`;

        // Animasyon bitiminde elementi kaldır
        shockwave.addEventListener('transitionend', () => {
            shockwave.remove();
        });
    }

    // Şok dalgasını oluştur
    createLaserShockwave();

    // Hedefe ulaştığında patlama gerçekleşsin
    setTimeout(() => {
        laser.remove(); // Füzeyi kaldır
        createExplosion1(targetX, targetY); // Patlama efekti fonksiyonunu çağır
    }, speed * 1000); // Hızı milisaniyeye çevir
}

// function createLaserShockwave(type, centerX, centerY) {
//   const angle = Math.round(Math.random() * 360);
//   const shockwave = document.createElement('div');
//   shockwave.classList.add(type === 'long' ? 'long-bar' : 'short-bar');
//   document.body.appendChild(shockwave);

//   // Şok dalgasının merkezini ayarla
//   shockwave.style.left = `${centerX}px`;
//   shockwave.style.top = `${centerY}px`;
//   // Rastgele açıyla dönüşüm uygula
//   shockwave.style.transform = `translate(-50%, -50%) rotate(${angle}deg)`;

//   // Animasyonu başlat
// //   shockwave.style.animation = 'shockwave 1.5s forwards';

//   // Animasyon bitiminde elementi kaldır
//   shockwave.addEventListener('animationend', () => {
//     shockwave.remove();
//   });
// }
// Füze gönderme fonksiyonu
function launchMissile(eventX,eventY) {
    const missile = document.createElement('div');
    missile.classList.add('missile');
    document.body.appendChild(missile);

    // Füzenin başlangıç konumunu ayarla
    const ballRect = ball.getBoundingClientRect();
    const startX = (ballRect.left + ballRect.width / 2) + window.scrollX;
    const startY = (ballRect.top + ballRect.height / 2) + window.scrollY;
    missile.style.left = startX + 'px';
    missile.style.top = startY + 'px';

    // Füzenin hedefe doğru hareketini ayarla
    const targetX = eventX + window.scrollX;
    const targetY = eventY + window.scrollY;
    
    // Hedefin uzaklığına göre füzenin hızını hesapla
    const distance = Math.sqrt(Math.pow(targetX - startX, 2) + Math.pow(targetY - startY, 2));
    const speed = distance / 500; // Hedefe ulaşması için gereken süre (milisaniye cinsinden)
    missile.style.transition = `all ${speed}s linear`;

    // Füzenin arkasında iz bırak
    const trail = document.createElement('div');
    trail.classList.add('trail1');
    trail.style.transition = `width ${speed}s linear`;
    trail.style.animation = `blink1 ${speed}s forwards`;
    document.body.appendChild(trail);

    // İzin başlangıç konumunu ayarla
    trail.style.position = 'absolute';
    trail.style.left = startX + 'px';
    trail.style.top = startY + 'px';
    trail.style.height = '2px';
    trail.style.backgroundColor = '#FCEAFF';
    trail.style.transformOrigin = '0 0';
    trail.style.transform = `rotate(${Math.atan2(targetY - startY, targetX - startX)}rad)`;
    trail.style.width = '0px';

    // İzin genişliğini animasyonla artır
    setTimeout(() => {
        trail.style.width = distance + 'px';
    }, 0);

    // Füzenin hedefe doğru hareketini başlat
    setTimeout(() => {
        missile.style.left = targetX - missile.offsetWidth / 2 + 'px'; // Füzenin merkezini hedefin merkezine getir
        missile.style.top = targetY - missile.offsetHeight / 2 + 'px'; // Füzenin merkezini hedefin merkezine getir
    }, 0);

    // Hedefe ulaştığında patlama gerçekleşsin
    setTimeout(() => {
        missile.remove(); // Füzeyi kaldır
        trail.remove(); // İzi kaldır
        createExplosion(targetX, targetY); // Patlama efekti fonksiyonunu çağır
    }, speed * 1000); // Hızı milisaniyeye çevir
}

function createShockwave(type, centerX, centerY) {
  const angle = Math.round(Math.random() * 360);
  const shockwave = document.createElement('div');
  shockwave.classList.add(type === 'long' ? 'long-bar' : 'short-bar');
  document.body.appendChild(shockwave);

  // Şok dalgasının merkezini ayarla
  shockwave.style.left = `${centerX}px`;
  shockwave.style.top = `${centerY}px`;
  // Rastgele açıyla dönüşüm uygula
  shockwave.style.transform = `translate(-50%, -50%) rotate(${angle}deg)`;

  // Animasyonu başlat
//   shockwave.style.animation = 'shockwave 1.5s forwards';

  // Animasyon bitiminde elementi kaldır
  shockwave.addEventListener('animationend', () => {
    shockwave.remove();
  });
}

function createExplosion(x, y) {
  const explosion = document.createElement('div');
  explosion.classList.add('explosion');
  document.body.appendChild(explosion);

  explosion.style.left = x + 'px';
  explosion.style.top = y + 'px';

  // Trigger reflow to ensure the animation starts
  void explosion.offsetWidth;

  // Start the explosion animation
  explosion.classList.add('expand');

  // Şok dalgalarını oluştur
  for (let i = 0; i < 3; i++) {
    createShockwave("long",x,y);
  }
  for (let i = 0; i < 6; i++) {
    createShockwave("short",x,y);
  }

  // Listen for the end of the animation to remove the explosion element
  explosion.addEventListener('animationend', function() {
    explosion.remove();
  });
}
function createExplosion1(x, y) {
  const explosion = document.createElement('div');
  explosion.classList.add('explosion1');
  document.body.appendChild(explosion);

  explosion.style.left = x + 'px';
  explosion.style.top = y + 'px';

  // Trigger reflow to ensure the animation starts
  void explosion.offsetWidth;

  // Start the explosion animation with a bright flash
  explosion.classList.add('flash');

  // Create particles in four directions
  createParticle(x, y, 'up');
  createParticle(x, y, 'down');
  createParticle(x, y, 'left');
  createParticle(x, y, 'right');

  // Listen for the end of the flash animation to remove the explosion element
  explosion.addEventListener('animationend', function() {
    explosion.remove();
  });
}

function createParticle(x, y, direction) {
  const particle = document.createElement('div');
  particle.classList.add('particle', direction);
  document.body.appendChild(particle);

  particle.style.left = x + 'px';
  particle.style.top = y + 'px';

  // Trigger reflow
  void particle.offsetWidth;

  // Start the particle animation
  particle.classList.add('move');

  // Listen for the end of the animation to remove the particle element
  particle.addEventListener('animationend', function() {
    particle.remove();
  });
}


// window.addEventListener('click', attack);
// function attack(event){
//   launchMissile(event); // Füze
//   launchLaser(event,laser1); // Lazer 1
//   launchLaser(event,laser2); // Lazer 2
// }

let missileCooldown = 1200; // Füze için bekleme süresi
let isAutomaticMode = false; // Otomatik mod varsayılan olarak kapalı
let lastExecutionTimeMissile = 0;
let attackInterval; // Sürekli saldırı için interval tanımı
let lastMousePosition = { x: 0, y: 0 }; // Son fare pozisyonunu saklamak için bir nesne

// Saldırı fonksiyonu
function attack() {
  const currentTime = Date.now(); // Şu anki zamanı al
  if (currentTime - lastExecutionTimeMissile > missileCooldown) { // Eğer son çalışmadan 1200ms geçtiyse
    launchMissile(lastMousePosition.x,lastMousePosition.y); // Füze
    lastExecutionTimeMissile = currentTime; // Son çalışma zamanını güncelle
  }
  launchLaser(lastMousePosition.x,lastMousePosition.y, laser1); // Lazer 1
  launchLaser(lastMousePosition.x,lastMousePosition.y, laser2); // Lazer 2
}

// Otomatik modu değiştirme fonksiyonu
function toggleAutomaticMode() {
  isAutomaticMode = !isAutomaticMode;
  console.log(`Otomatik mod ${isAutomaticMode ? 'aktif' : 'pasif'}`);
}

// Fare tıklama olayını dinleme ve saldırı fonksiyonunu çağırma
main.addEventListener('click', attack);

// Fare basılı tutma olayını dinleme ve sürekli saldırıyı başlatma
main.addEventListener('mousedown', () => {
  isAutomaticMode = true;
  if (!attackInterval) { // Eğer interval zaten ayarlanmadıysa
    attackInterval = setInterval(attack, 100); // Belirli aralıklarla saldırıyı başlat
  }
});

// Fare bırakma olayını dinleme ve sürekli saldırıyı durdurma
main.addEventListener('mouseup', () => {
  isAutomaticMode = false;
  clearInterval(attackInterval); // Interval'i temizle
  attackInterval = null; // Interval değişkenini sıfırla
});

// Fare hareket olayını dinleme ve hedef pozisyonunu güncelleme
main.addEventListener('mousemove', (event) => {
  lastMousePosition = { x: event.clientX, y: event.clientY }; // Son fare pozisyonunu güncelle
  rotateBall(lastMousePosition.x,lastMousePosition.y);
});

window.onload = function() {
  setTimeout(()=>{
    move("up");
  updateCamera();
  },1000)
};

    </script>
</html>